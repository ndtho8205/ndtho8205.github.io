<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Tho Nguyen"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Con trỏ trong cpp - Rabbit</title><link rel="shortcut icon" href=https://ndtho8205.github.io/images/favicon.ico type=image/x-icon><link rel=icon href=https://ndtho8205.github.io/images/favicon.ico type=image/x-icon><link rel=stylesheet href=https://ndtho8205.github.io/css/main.min.8f721efcf9c12e614635fe7bcf273c79b62d8d904da60c9b801bfb710003025e.css integrity="sha256-j3Ie/PnBLmFGNf57zyc8ebYtjZBNpgybgBv7cQADAl4="></head><body class="w-100 opensans f6 f5-ns tc-primary"><header class="mw8 center mb4 mb5-ns ph3 ph4-ns pt4 pt2-l pb2 flex flex-column flex-row-l justify-between items-center top-0-l bb b--divider"><a class="link tc-primary mb3 mb0-l" href=https://ndtho8205.github.io/><img src=/images/logo.svg alt=logo class="v-mid w-logo">
<span class="pl2 f3 playfair b tracked-mega v-mid">Rabbit</span></a><nav class=mv3><a class="mh2 mh3-ns link tc-secondary hover-accent f7 f6-ns ttu fw6 tracked" href=/>Blog</a>
<a class="mh2 mh3-ns link tc-secondary hover-accent f7 f6-ns ttu fw6 tracked" href=/projects/>Projects</a>
<a class="mh2 mh3-ns link tc-secondary hover-accent f7 f6-ns ttu fw6 tracked" href=/reading/>Reading</a>
<a class="mh2 mh3-ns link tc-secondary hover-accent f7 f6-ns ttu fw6 tracked" href=/about/>About</a></nav></header><main class="mw7 ph3 center"><article class="lh-copy tj"><header><aside class=f6><time datetime=2015-05-31T00:00:00Z class=tc-secondary>31 May 2015</time></aside><h1 class="playfair f4 f3-m f2-l ma0 accent-dark">Con trỏ trong cpp</h1></header><div class="mt4 mt5-ns"><p>Khái niệm con trỏ mình đã gặp từ hồi cấp 3 lúc học Pascal, cũng chật vật lắm mới hiểu được rồi dùng để tạo danh sách liên kết, heap, cây, giải được một lốc bài toán tin.</p><p>Tìm hiểu nhiều hơn, nó cũng có nhiều trò vui nữa, sử dụng con trỏ access vào vùng memory dành riêng cho việc hiển thị màn hình (mình nhớ là mảng ký tự 80x25) khi đó thay đổi một phần tử [x, y] trong mảng, tương ứng ô kí tự trên màn hình console ở vị trí [x, y] cũng thay đổi theo (gốc toạ độ ở màn hình console là góc trái trên), mình dùng cái này để viết chương trình vẽ chữ (tặng gái 😄). Nguyên tắc là chương trình sẽ nhận toạ độ mà chuột click vào, sau đó viết một kí tự (người dùng đã nhập trước) ngay vị trí ấy (không có dùng thủ tục gotoxy nhá). Ngồi mở lại file đó định chụp cái hình nhưng Windows 8 không chạy, buồn ghê 😢</p><p>Quay lại vấn đề chính. Trong C/cpp có thể nói con trỏ đã được nâng lên một tầm cao mới, một công cụ cực kì mạnh 👏 Mạnh như thế nào? Hồi sau sẽ rõ 😏</p><p>Các khái niệm liên quan đến con trỏ đều khá trừu tượng, tìm hiểu không tường tận sẽ có nhiều vấn đề khiến bạn khó hiểu, hiểu sai (mình không dám bảo là mình master phần này, có sai sót gì cùng nhau thảo luận, sửa chữa, bổ sung nhé).</p><h3 id=con-trỏ-là-gì>Con trỏ là gì?</h3><p>Con trỏ là một biến dùng để chứa địa chỉ. Bản chất con trỏ vẫn là một <strong>biến nguyên</strong> bình thường như bao biến nguyên khác. Tức là nó cũng có địa chỉ riêng trong bộ nhớ, giá trị nó lưu trữ cũng thuộc dạng số nguyên.</p><p><strong>Thứ nhất</strong>, mình đã nói con trỏ là một biến nguyên, có thể bạn sẽ thắc mắc với các khai báo sau.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-cpp data-lang=cpp><span class=k>struct</span> <span class=nc>sampleStruct</span> <span class=p>{</span>
<span class=c1>// các trường của sampleStruct
</span><span class=c1></span><span class=p>}</span><span class=p>;</span>

<span class=kt>double</span> <span class=o>*</span><span class=n>pDouble</span><span class=p>;</span>
<span class=kt>char</span> <span class=o>*</span><span class=n>pChar</span><span class=p>;</span>
<span class=n>sampleStruct</span> <span class=err>\</span><span class=o>*</span><span class=n>pSS</span><span class=p>;</span>
</code></pre></td></tr></table></div></div><p>Các con trỏ <code>pDouble</code>, <code>pChar</code>, <code>pSS</code> là kiểu gì? Trả lời: Kiểu nguyên hết đó! Kiểu dữ liệu khi khai báo con trỏ là <strong>kiểu dữ liệu của vùng nhớ</strong> mà con trỏ trỏ đến.</p><p><strong>Thứ hai</strong>, con trỏ khác các biến bình thường bạn tạo (dùng để chứa số hạng), nó chứa địa chỉ của biến khác. Khi in địa chỉ của một biến ra màn hình (dùng toán tử <code>&</code>), bạn thấy kết quả là một số nguyên viết ở hệ đếm cơ số 16 (hexadecimal) và bạn nghĩ địa chỉ thực chất cũng là số nguyên. Vâng, nhưng bạn cần hiểu thêm rằng, mặc dù địa chỉ của biến là một số nguyên <strong>nhưng</strong> không được đánh đồng nó với các số nguyên thông thường dùng trong các phép tính, nó có một kí hiệu đặc biệt để nhận biết. Do đó bạn không thể gán giá trị của con trỏ bằng một số nguyên bình thường. Sau đây là đoạn code chứng minh.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-cpp data-lang=cpp><span class=cp>#</span><span class=cp>include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span><span class=cp></span>
<span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
<span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>9</span><span class=p>;</span>
<span class=kt>int</span> <span class=err>\</span><span class=o>*</span><span class=n>p</span><span class=p>;</span>

    <span class=n>p</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>;</span>
    <span class=n>p</span> <span class=o>=</span> <span class=mi>9</span><span class=p>;</span>
    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>Compiler báo lỗi ở dòng số 8: <code>invalid conversion from 'int' to 'int*'</code>. Bạn hãy sửa lại như dưới đây và chạy lại.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-cpp data-lang=cpp><span class=n>p</span> <span class=o>=</span> <span class=p>(</span><span class=kt>int</span><span class=err>\</span><span class=o>*</span><span class=p>)</span> <span class=mi>9</span><span class=p>;</span>
</code></pre></td></tr></table></div></div><p>Bạn đã hiểu chứ?</p><p><strong>Thứ ba</strong>, điều cuối cùng, bạn cần phân biệt rõ địa chỉ của con trỏ và địa chỉ vùng nhớ mà con trỏ trỏ đến.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-cpp data-lang=cpp><span class=cp>#</span><span class=cp>include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span><span class=cp></span>
<span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
<span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
<span class=kt>int</span> <span class=err>\</span><span class=o>*</span><span class=n>p</span><span class=p>;</span>

    <span class=n>std</span><span class=o>:</span><span class=o>:</span><span class=n>cout</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=sa></span><span class=s>&#34;</span><span class=s>Dia chi cua a: </span><span class=s>&#34;</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=o>&amp;</span><span class=n>a</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=n>std</span><span class=o>:</span><span class=o>:</span><span class=n>endl</span><span class=p>;</span>
    <span class=n>std</span><span class=o>:</span><span class=o>:</span><span class=n>cout</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=sa></span><span class=s>&#34;</span><span class=s>Dia chi cua p: </span><span class=s>&#34;</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=o>&amp;</span><span class=n>p</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=sa></span><span class=sc>&#39;</span><span class=sc>\t</span><span class=sc>&#39;</span>
          <span class=o>&lt;</span><span class=o>&lt;</span> <span class=sa></span><span class=s>&#34;</span><span class=s>Gia tri cua p: </span><span class=s>&#34;</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=n>p</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=n>std</span><span class=o>:</span><span class=o>:</span><span class=n>endl</span><span class=p>;</span>

    <span class=n>p</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>;</span>

    <span class=n>std</span><span class=o>:</span><span class=o>:</span><span class=n>cout</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=sa></span><span class=s>&#34;</span><span class=s>Dia chi cua p: </span><span class=s>&#34;</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=o>&amp;</span><span class=n>p</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=sa></span><span class=sc>&#39;</span><span class=sc>\t</span><span class=sc>&#39;</span>
          <span class=o>&lt;</span><span class=o>&lt;</span> <span class=sa></span><span class=s>&#34;</span><span class=s>Gia tri cua p: </span><span class=s>&#34;</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=n>p</span> <span class=o>&lt;</span><span class=o>&lt;</span> <span class=n>std</span><span class=o>:</span><span class=o>:</span><span class=n>endl</span><span class=p>;</span>

    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>Đây là kết quả sau khi chạy đoạn code trên.</p><p><img src=/images/Controtrongcpp_1.png alt=Controtrongcpp_1.png></p><p>Xem hình này để dễ hình dung nhé.</p><p><img src=/images/Controtrongcpp_2.png alt=Controtrongcpp_2.png></p><p>Xong bài! 😂 Hy vọng nó dễ hiểu với mọi người.</p><p>À về dòng <code>Virtual memory</code>, là do mình đang tìm hiểu Memory management, đọc một số tài liệu thấy ghi vậy là chuẩn nhất. Bài sau mình sẽ làm rõ. Chả là vì tìm hiểu chưa tới đâu, lại đụng chạm tới Assembly, gần thi nên thời gian hạn hẹp. Hẹn lại nhé! 😄</p></div></article></main><footer class="mt5 pa4 mid-gray bt b--divider"><div class="f6 tc tc-secondary">&copy; Tho Nguyen, 2020.
Built with <a class="link tc-secondary hover-primary-light" href=https://gohugo.io/>Hugo</a>.</div></footer><script src=https://ndtho8205.github.io/js/main.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.js></script></body></html>